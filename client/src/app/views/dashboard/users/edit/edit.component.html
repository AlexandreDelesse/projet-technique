<div class="row" *ngIf="user">
  <div class="col-md-12 mb-3">
    <h4 class="dashboard-heading">Modifier un utilisateur</h4>

    <h5 class="dashboard-subheading">Informations personelles</h5>
    <form method="POST" (ngSubmit)="updateUser()" #form="ngForm" class="mb-5">
      <div class="form-group row">
        <label for="firstname" class="col-sm-3 col-form-label">Prénom</label>
        <div class="col-sm-9">
          <input
            id="firstname"
            type="text"
            class="form-control"
            [(ngModel)]="user.firstname"
            #firstname="ngModel"
            name="firstname"
            required
          />
          <small
            class="form-help text-danger"
            *ngIf="firstname.invalid && (firstname.dirty || firstname.touched)"
          >
            <span *ngIf="firstname.errors && firstname.errors.required">
              Ce champ est obligatoire.
            </span>
          </small>
        </div>
      </div>
      <div class="form-group row">
        <label for="lastname" class="col-sm-3 col-form-label">Nom</label>
        <div class="col-sm-9">
          <input
            id="lastname"
            type="text"
            class="form-control"
            [(ngModel)]="user.lastname"
            #lastname="ngModel"
            name="lastname"
            required
          />
          <small
            class="form-help text-danger"
            *ngIf="lastname.invalid && (lastname.dirty || lastname.touched)"
          >
            <span *ngIf="lastname.errors && lastname.errors.required">
              Ce champ est obligatoire.
            </span>
          </small>
        </div>
      </div>
      <div class="form-group row">
        <label for="birthdate" class="col-sm-3 col-form-label"
          >Date de naissance</label
        >
        <div class="col-sm-9">
          <input
            id="birthdate"
            class="form-control"
            type="datetime"
            [owlDateTime]="dt1"
            [owlDateTimeTrigger]="dt1"
            [(ngModel)]="user.birthdate"
            #birthdate="ngModel"
            name="birthdate"
          />
          <owl-date-time [pickerType]="'calendar'" #dt1></owl-date-time>
        </div>
      </div>
      <div class="form-group row">
        <label for="blood" class="col-sm-3 col-form-label">
          Groupe sanguin
        </label>
        <div class="col-sm-9">
          <select
            class="form-control"
            id="blood"
            name="blood"
            [(ngModel)]="user.bloodgroup_id"
            #blood="ngModel"
          >
            <option value="" disabled>Séléctionnez votre groupe sanguin</option>
            <option value="1">A <sup>+</sup></option>
            <option value="2">A <sup>-</sup></option>
            <option value="3">B <sup>+</sup></option>
            <option value="4">B <sup>-</sup></option>
            <option value="5">AB <sup>+</sup></option>
            <option value="6">AB <sup>-</sup></option>
            <option value="8">O <sup>+</sup></option>
            <option value="9">O <sup>-</sup></option>
          </select>
        </div>
      </div>
      <div class="form-group row">
        <label for="gender" class="col-sm-3 col-form-label">Sexe</label>
        <div class="col-sm-9">
          <select
            class="form-control"
            id="gender"
            name="gender"
            [(ngModel)]="user.gender"
            #gender="ngModel"
          >
            <option value="Male">Homme</option>
            <option value="Female">Femme</option>
          </select>
        </div>
      </div>
      <div class="form-group row">
        <label for="email" class="col-sm-3 col-form-label">Email</label>
        <div class="col-sm-9">
          <input
            id="email"
            type="email"
            class="form-control"
            [(ngModel)]="user.email"
            #email="ngModel"
            name="email"
            required
            email
          />
          <small
            class="form-help text-danger"
            *ngIf="email.invalid && (email.dirty || email.touched)"
          >
            <span *ngIf="email.errors && email.errors.required">
              Ce champ est obligatoire.
            </span>
            <span *ngIf="email.errors && email.errors.email">
              Veuillez entre une adresse mail valide.
            </span>
          </small>
        </div>
      </div>
      <div class="form-group row">
        <label for="phone" class="col-sm-3 col-form-label">
          Numéro de téléphone
        </label>
        <div class="col-sm-9">
          <input
            id="phone"
            type="text"
            class="form-control"
            [(ngModel)]="user.phone"
            #phone="ngModel"
            name="phone"
          />
          <small
            class="form-help text-danger"
            *ngIf="phone.invalid && (phone.dirty || phone.touched)"
          >
          </small>
        </div>
      </div>
      <div class="form-group">
        <button class="btn btn-success" type="submit" [disabled]="isLoading">
          <span *ngIf="!isLoading">Modifier</span>
          <div
            class="spinner-border spinner-border-sm"
            role="status"
            *ngIf="isLoading"
          >
            <span class="sr-only">Chargement...</span>
          </div>
        </button>
      </div>
    </form>
  </div>
</div>

<app-flash-alert
  [show]="showSuccessAlert"
  [message]="successMessage"
></app-flash-alert>

<app-flash-alert
  [show]="showErrorAlert"
  [message]="'Une erreur s\'est produit, veuillez réessayer. '"
  [type]="'danger'"
></app-flash-alert>
